{% load static %}{% load socialaccount %}{% load countries %}{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Schedule - CIMPS</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="{% static 'images/favicon.ico'%}" rel="icon">
  <link href="{% static 'assets/img/apple-touch-icon.png'%}" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/boxicons/css/boxicons.min.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/quill/quill.snow.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/quill/quill.bubble.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/remixicon/remixicon.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/simple-datatables/style.css'%}" rel="stylesheet">

  <link href="{% static 'assets/css/style.css'%}" rel="stylesheet">
  <link href="{% static 'flags/sprite.css'%}" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>









</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">

    <div class="d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center">
        <img src="{% static 'images/black_logo.png' %}" alt="">
        <span class="d-none d-lg-block">CIMPS {% now 'Y' %}</span>
      </a>
      <i class="bi bi-list toggle-sidebar-btn"></i>
    </div><!-- End Logo -->

    

    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">

        

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications">
            <li class="dropdown-header">
              You have 4 new notifications
              <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="notification-item">
              <i class="bi bi-exclamation-circle text-warning"></i>
              <div>
                <h4>Lorem Ipsum</h4>
                <p>Quae dolorem earum veritatis oditseno</p>
                <p>30 min. ago</p>
              </div>
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="notification-item">
              <i class="bi bi-x-circle text-danger"></i>
              <div>
                <h4>Atque rerum nesciunt</h4>
                <p>Quae dolorem earum veritatis oditseno</p>
                <p>1 hr. ago</p>
              </div>
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="notification-item">
              <i class="bi bi-check-circle text-success"></i>
              <div>
                <h4>Sit rerum fuga</h4>
                <p>Quae dolorem earum veritatis oditseno</p>
                <p>2 hrs. ago</p>
              </div>
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="notification-item">
              <i class="bi bi-info-circle text-primary"></i>
              <div>
                <h4>Dicta reprehenderit</h4>
                <p>Quae dolorem earum veritatis oditseno</p>
                <p>4 hrs. ago</p>
              </div>
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>
            <li class="dropdown-footer">
              <a href="#">Show all notifications</a>
            </li>

          </ul><!-- End Notification Dropdown Items -->

        </li><!-- End Notification Nav -->

        <li class="nav-item dropdown">

          

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages">
            <li class="dropdown-header">
              You have 3 new messages
              <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            
            <li>
              <hr class="dropdown-divider">
            </li>

            
            <li>
              <hr class="dropdown-divider">
            </li>

            
            <li>
              <hr class="dropdown-divider">
            </li>

            

          </ul><!-- End Messages Dropdown Items -->

        </li><!-- End Messages Nav -->

        <li class="nav-item dropdown pe-3">

          <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
            <img src="{{ user.socialaccount_set.all.0.get_avatar_url }}" alt="Profile" class="rounded-circle">
            <span class="d-none d-md-block  ps-2">Hi, {{ user.socialaccount_set.all.0.extra_data.name }}</span>
          </a><!-- End Profile Iamge Icon -->

          
        </li><!-- End Profile Nav -->

      </ul>
    </nav><!-- End Icons Navigation -->

  </header><!-- End Header -->

  <!-- ======= Sidebar ======= -->
  <aside id="sidebar" class="sidebar">

    <ul class="sidebar-nav" id="sidebar-nav">

      <li class="nav-item">
        <a class="nav-link collapsed" href="{% url 'complete_profile'%}">
          <i class="bi bi-person"></i>
          <span>Profile Information</span>
        </a>
      </li>
      <li class="nav-item"></li>
        <a class="nav-link collapsed" href="{% url 'dashboard' %}">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li>
      <li class="nav-item"></li>
      <a class="nav-link collapsed" href="{% url 'payment' %}">
          <i class="bi bi-cash-coin"></i>
          <span>Payment</span>
        </a>
      </li>
      <li class="nav-item"></li>
    <a class="nav-link " href="{% url 'schedule' %}">
      <i class="bi bi-calendar"></i>
      <span>Schedule (Program)</span>
    </a>
    <li class="nav-item"></li>
    <a class="nav-link collapsed" href="{% url 'seeMySchedule' %}">
      <i class="bi bi-file-earmark-break"></i>
      <span>See my schedule</span>
    </a>
  </li>
      <li class="nav-item"></li>
        <a class="nav-link collapsed" href="{% url 'account_logout' %}">
          <i class="bi bi-door-closed-fill"></i>
          <span>Log Out</span>
        </a>
      </li>
      
      {% if is_staff_user %}
      <li class="nav-item">Staff options</li>
        <a class="nav-link collapsed" href="{% url 'assistanceList' %}">
          <i class="bi bi-check2-square"></i>
          <span>Assistance List (Events)</span>
        </a>
      </li>
      
      <li class="nav-item"></li>
            <a class="nav-link collapsed" href="{% url 'consultWelcomeKit' %}">
              <i class="bi bi-box2-heart"></i>
              <span>Welcome Kit Control</span>
            </a>
          </li>
      <li class="nav-item"></li>
        <a class="nav-link collapsed" href="{% url 'validatePaymentAdmin' %}">
          <i class="bi bi-wallet2"></i>
          <span>Validate Payments</span>
        </a>
      </li>
      
      {% endif %}
      {% if is_staff_superuser %}
      <li class="nav-item">Super Admin options</li>
        <a class="nav-link collapsed" href="{{request.scheme}}://{{ request.get_host }}/admin">
          <i class="bi bi-terminal"></i>
          <span>Super Admin Console</span>
        </a>
      </li>
      <li class="nav-item"></li>
        <a class="nav-link collapsed" href="{% url 'registerPlace' %}">
          <i class="bi bi-building"></i>
          <span>Register Places</span>
        </a>
      </li>
      <li class="nav-item"></li>
        <a class="nav-link collapsed" href="{% url 'registerEvent' %}">
          <i class="bi bi-briefcase"></i>
          <span>Register Events</span>
        </a>
      </li>
      <li class="nav-item"></li>
        <a class="nav-link collapsed" href="{% url 'listEvents' %}">
          <i class="bi bi-card-list"></i>
          <span>List Events</span>
        </a>
      </li>
      <li class="nav-item"></li>
        <a class="nav-link collapsed" href="{% url 'manageCongressDates' %}">
          <i class="bi bi-calendar-check"></i>
          <span>Manage Congress Dates</span>
        </a>
      </li>
      {% endif %}
    </ul>

  </aside><!-- End Sidebar-->

  <main id="main" class="main">
    {% if not paymentCompleted and not allowRegistration %}
    
    <div id="no-completed-payment" class="alert alert-danger" role="alert">
        <pre><h3>VERY IMPORTANT: </h3><ol><li>Until you have completed payment, the system will not allow you to register for a talk, workshop, or any event.</pre></li>
            </ol>
    </div>
    {% elif paymentCompleted and not allowRegistration %}
    <div id="completed-payment" class="alert alert-warning" role="alert">
        <pre><h3>VERY IMPORTANT: </h3></pre><ol><li>Registration for events is subject to the capacity of the space.</li>
                <li>
                    The registration opening / apertura de registro will be conducted in the Auditorio "Posgrados-Educ. Continua" as equal as the keynotes of the event o 09:00 - 10:00, meaning that during this time other spaces will not be used.
                </li>
                <li>Please review the workshops carefully, as once you have registered for one you will not be able to register for others and it will not be possible to change your registration.</li>
            </ol>
    </div>
    {% elif not paymentCompleted and allowRegistration %}
    <div id="scholarship" class="alert alert-warning" role="alert">
      <pre><h3>VERY IMPORTANT: </h3></pre><ol>
              <li>
                  Registration for events is subject to the capacity of the space.
              </li>
              <li>
                  You have received a <strong>scholarship</strong>, this means that you <strong>will not receive </strong> the welcome kit.
              </li>
              <li>Please review the workshops carefully, as once you have registered for one you will not be able to register for others and it will not be possible to change your registration.</li>
          </ol>
      
  </div>

    {% endif %}

    <div class="pagetitle">
      <h1>Schedule</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item active">Schedule</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .place-column {
            vertical-align: top;
            width: 14.28%;  /* Divides table into 7 equal parts */
        }
        .event {
            margin-bottom: 1px;
        }
    </style>
    <script>
        var userRegistrations = {{ user_registrations|safe }};
        var userHasWorkshop = {{ user_has_workshop|yesno:"true,false" }};
    </script>

    <section class="section dashboard">
      <div class="row">

        <!-- Left side columns -->
        <div class="col-lg-12">
          <div class="row">

            

            <!-- Reports -->
            <div class="col-12">
              <div class="card">

                <div class="filter">
                  <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                  </ul>
                </div>
                <style>
                th, td {
                    text-align: center;
                    vertical-align: middle;
                }
                .nav-tabs .nav-link.active {
    background-color: #007bff; /* Cambia este color por el que prefieras */
    color: #fff; /* Esto cambia el color del texto */
}
                </style>
                
                <div class="card-body">
                    <h5 class="card-title">Schedule of the congress <span> - CIMPS {% now "Y" %}</span></h5>
                    
                    <ul class="nav nav-tabs nav-justified" id="congressTabs" role="tablist">
                      {% for date in congress_dates %}
                          <li class="nav-item" role="presentation">
                              <a class="nav-link {% if forloop.first %}active{% endif %}" id="tab-{{ date.date|date:'Y-m-d' }}" data-bs-toggle="tab" href="#content-{{ date.date|date:'Y-m-d' }}" role="tab" aria-controls="content-{{ date.date|date:'Y-m-d' }}" aria-selected="{% if forloop.first %}true{% else %}false{% endif %}">
                                  {{ date.date|date:"d M Y" }} 
                              </a>
                          </li>
                      {% endfor %}
                  </ul>
                    
                    <div class="tab-content" id="congressTabsContent">
                        {% for date, time_slots_events in events_by_date.items %}
                            <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" id="content-{{ date|date:'Y-m-d' }}" role="tabpanel" aria-labelledby="tab-{{ date|date:'Y-m-d' }}">
                                <style>
                                    table{
                                        border: none;
                                    }
                                    .table-schedule {
                                        border-collapse: none;
                                        border-spacing: 0px;
                                    }
                                    .table-schedule td {
                                        padding: 0;
                                        vertical-align: top; /* Cambiado a 'top' para que empiece desde la parte superior */
                                        position: relative; /* Permite que los hijos puedan usar 'absolute' */
                                        height: auto; /* Para que la celda ajuste su altura automáticamente */
                                    }
                                    .event {
                                        /* position: absolute; Cambiado a absolute para llenar completamente la celda */
                                        top: 0; /* Inicia en la parte superior */
                                        left: 0; /* Inicia a la izquierda */
                                        right: 0; /* Se extiende a la derecha */
                                        bottom: 0; /* Se extiende hasta la parte inferior */
                                        padding: 1px; /* Espaciado interno */
                                        margin: 0; /* Elimina margen para llenar completamente la celda */
                                        border-radius: 0px;
                                        font-size: 0.8em;
                                        box-sizing: border-box; /* Incluye padding en el tamaño total */
                                        /* max-height: 200px; Establece una altura máxima */
                                        /* overflow: auto;  */
                                        height: 100%;
                                    }
                                    .place-column {
                                        /* width: 200px; */
                                    }
                                    .see-details {
                                        color: inherit;
                                        text-decoration: underline;
                                    }
                                    .event {
                                      border-radius: 10px;
                                    }
                                </style>
                                
                                
                                <table class="table table-borderless text-center table-schedule" style="height:fit-content">
                                  <thead class="text-center">
                                      <tr>
                                          <th></th>
                                          {% for place in places %}
    <th id="place-{{ place.name|slugify }}" 
        class="
            {% if forloop.first %} bg-danger 
            {% elif forloop.counter == 2 %} bg-warning 
            {% else %} bg-secondary 
            {% endif %}
        ">
        {{ place.name }} (Capacity: {{ place.capacity }})
    </th>
{% endfor %}

                                      </tr>
                                  </thead>
                                  <tbody>
                                      {% for time_slot, places_events in time_slots_events.items %}
                                      <tr>
                                          <td id="time-slot-{{ forloop.counter }}">{{ time_slot }}</td>
                                          {% if forloop.counter == 2 or forloop.counter == 1 or forloop.counter == 14 or forloop.counter == 6 %}
                                              {% with first_place=places.1 %}
                                              {% with place_events=places_events|get_item:first_place.name %}
                                              {% with event=place_events.0 %}
                                              <td id="event-{{ forloop.counter }}-{{ event.id }}" colspan="7" class="place-column">
                                                  <div class="event {% if event.event_type == 'ieee' %}bg-warning{% elif event.event_type == 'springer' or event.event_type == 'keynote' %}bg-danger{% elif event.event_type == 'lunch' %}bg-info{% elif event.event_type == 'workshop' %}bg-secondary{% else %}bg-success{% endif %}" {% if event.available_capacity == 0 %}disabled{% endif %}>
                                                      <strong>{{ event.title }}</strong><br>
                                                      <span>{{ event.start_time|time:"H:i" }} - {{ event.end_time|time:"H:i" }}</span><br>
                                                      {% if event.ponent_name %}
                                                      <strong><span>Speaker: {{ event.ponent_name }}</span></strong><br><br>
                                                      {% endif %}
                                                      {% if event.moderator %}
                                                      <strong><span>Moderator: {{ event.moderator }}</span></strong><br>
                                                      {% endif %}
                                                      {% if not event.event_type == 'other' and not event.event_type == 'lunch' %}
                                                      Available spaces: {{ event.available_capacity }} <br>
                                                      {% endif %}
                                                      {% if event.event_type != 'lunch' %}
                                                      <a href="#" class="see-details" data-toggle="modal" data-target="#eventModal" data-title="{{ event.title }}" data-description="{{ event.description }}">See Details</a>
                                                      {% endif %}
                                                      {% if paymentCompleted or allowRegistration %} <br>
                                                      {% if not event.event_type == 'other' and event.event_type != 'lunch'%}
                                                      <button class="btn btn-light rounded-pill register-event" data-event-title="{{ event.title }}" data-event-id="{{ event.id }}" data-event-type="{{ event.event_type }}">Register</button>
                                                      {% endif %}
                                                      
                                                      {% endif %}
                                                      
                                                      
                                                  </div>
                                              </td>
                                              {% endwith %}
                                              {% endwith %}
                                              {% endwith %}
                                          {% else %}
                                              {% for place in places %}
                                              <td id="place-event-{{ forloop.parentloop.counter }}-{{ place.name|slugify }}" class="place-column" 
                                                  {% if forloop.counter == 1 and event_should_span %} rowspan="2"{% endif %}>
                                                  {% with place_events=places_events|get_item:place.name %}
                                                  {% for event in place_events %}
                                                  <div id="event-{{ forloop.parentloop.counter }}-{{ event.id }}" class="event {% if event.event_type == 'ieee' %}bg-warning{% elif event.event_type == 'springer' or event.event_type == 'keynote' %}bg-danger{% elif event.event_type == 'lunch' %}bg-info{% elif event.event_type == 'workshop' %}bg-secondary{% else %}bg-success{% endif %}" {% if event == 'other'%}colspan="2" {% endif %}  {% if event.available_capacity == 0 %}disabled{% endif %}>
                                                      <strong>{{ event.title }}</strong><br>
                                                      <span>{{ event.start_time|time:"H:i" }} - {{ event.end_time|time:"H:i" }}</span><br>
                                                      {% if event.ponent_name %}
                                                      <strong><span>Speaker: {{ event.ponent_name }}</span></strong><br><br>
                                                      {% endif %}
                                                      {% if event.moderator %}
                                                      <strong><span>Moderator: {{ event.moderator }}</span></strong><br>
                                                      {% endif %}
                                                      {% if not event.event_type == 'other' and not event.event_type == 'lunch' %}
                                                      Available spaces: {{ event.available_capacity }} <br>
                                                      {% endif %}
                                                      {% if event.event_type != 'lunch' %}
                                                      <a href="#" class="see-details" data-toggle="modal" data-target="#eventModal" data-title="{{ event.title }}" data-description="{{ event.description }}">See Details</a>
                                                      {% endif %}
                                                      {% if paymentCompleted or allowRegistration and not event.event_type == 'other' and event.event_type != 'lunch' %} <br>
                                                      <button class="btn btn-light rounded-pill register-event" data-event-title="{{ event.title }}" data-event-id="{{ event.id }}" data-event-type="{{ event.event_type }}">Register</button>
                                                      {% endif %}
                                                  </div>
                                                  {% endfor %}
                                                  {% endwith %}
                                              </td>
                                              {% endfor %}
                                          {% endif %}
                                      </tr>
                                      {% endfor %}
                                  </tbody>
                              </table>
                              <style>
                                #event-7-85, #event-3-79, #event-4-88,#event-5-87,#event-6-86 ,#event-3-80,#event-4-81,#event-5-82,#event-6-83,#event-7-84,#event-3-123,#event-4-124,#event-5-125,#event-6-126,#event-7-127 {
                                    display: flex; /* Usa flexbox para centrar */
                                    flex-direction: column; /* Alinea el contenido en columna */
                                    justify-content: center; /* Centra verticalmente */
                                    align-items: center; /* Centra horizontalmente */
                                    height: 100%; /* O ajusta según sea necesario */
                                }
                            </style>
                              <script>
                                document.addEventListener("DOMContentLoaded", function() {
                                    // Crear un objeto para rastrear los IDs que ya hemos encontrado
                                    const seenIds = {};
                            
                                    // Obtener todos los divs que tienen un id
                                    const divs = document.querySelectorAll("div[id]");
                            
                                    divs.forEach(div => {
                                        const id = div.id;
                            
                                        // Si el ID ya ha sido visto, eliminar el div
                                        if (seenIds[id]) {
                                            div.remove();
                                        } else {
                                            // Si no ha sido visto, marcarlo como visto
                                            seenIds[id] = true;
                                        }
                                    });
                                });
                                document.addEventListener("DOMContentLoaded", function() {
                                  var targetDiv = document.getElementById("event-3-123");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-7-84");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-3-131");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-4-132");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-5-133");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-6-134");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-5-133");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-6-134");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-7-129");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-3-166");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-4-165");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-5-162");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-6-161");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-7-130");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-4-124");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-5-125");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-6-126");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-7-127");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-3-167");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-4-164");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-5-163");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-6-160");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-7-128");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-3-79");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-4-88");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-5-87");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-6-86");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-7-85");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-3-80");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-4-81");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-5-82");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-6-83");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  

                                });
                              </script>
                                                          
                              
                              
                              
                                
                                <!-- Modal -->
                                <div class="modal fade" id="eventModal" tabindex="-1" role="dialog" aria-labelledby="eventModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="eventModalLabel">Event Details</h5>
                                            </div>
                                            <div class="modal-body">
                                                <h6 id="modal-event-title"></h6>
                                                <p id="modal-event-description"></p>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <script>
                                    $(document).on('click', '.see-details', function() {
                                        var title = $(this).data('title');
                                        var description = $(this).data('description');
                                        
                                        $('#modal-event-title').text(title);
                                        $('#modal-event-description').text(description);
                                    });
                                </script>
                                <script>
                                    $(document).ready(function() {
                                        // Disable buttons for events the user is already registered for
                                        userRegistrations.forEach(function(eventTitle) {
                                            $('button.register-event[data-event-title="' + eventTitle + '"]').prop('disabled', true).text('Registered');
                                        });
                                
                                        // If user has a workshop, disable all other workshop buttons
                                        if (userHasWorkshop) {
                                            $('button.register-event[data-event-type="workshop"]').not(':disabled').prop('disabled', true).text('Workshop Limit Reached');
                                        }
                                
                                        $('.register-event').click(function() {
                                            var eventTitle = $(this).data('event-title');
                                            var eventType = $(this).data('event-type');
                                            var button = $(this);
                                            
                                            if (userRegistrations.includes(eventTitle)) {
                                                Swal.fire('Already Registered', 'You are already registered for this event.', 'info');
                                                return;
                                            }
                                
                                            if (eventType === 'workshop' && userHasWorkshop) {
                                                Swal.fire('Workshop Limit Reached', 'You can only register for one workshop.', 'info');
                                                return;
                                            }
                                
                                            Swal.fire({
                                                title: 'Confirm Registration',
                                                text: 'Do you want to register for the event: ' + eventTitle + '?',
                                                icon: 'question',
                                                showCancelButton: true,
                                                confirmButtonColor: '#3085d6',
                                                cancelButtonColor: '#d33',
                                                confirmButtonText: 'Yes, register me!'
                                            }).then((result) => {
                                                if (result.isConfirmed) {
                                                    $.ajax({
                                                        url: '{% url "registerintoEvent" %}',
                                                        type: 'POST',
                                                        data: {
                                                            'event_title': eventTitle,
                                                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                                                        },
                                                        success: function(response) {
                                                            if (response.success) {
                                                                Swal.fire(
                                                                    'Registered!',
                                                                    'You have been successfully registered for the event.',
                                                                    'success'
                                                                );
                                                                // Disable all buttons for this event across all places
                                                                $('button.register-event[data-event-title="' + eventTitle + '"]').prop('disabled', true).text('Registered');
                                                                // Add the event to the user's registrations
                                                                userRegistrations.push(eventTitle);
                                                                
                                                                // If it's a workshop, disable all other workshop buttons
                                                                if (eventType === 'workshop') {
                                                                    userHasWorkshop = true;
                                                                    $('button.register-event[data-event-type="workshop"]').not(':disabled').prop('disabled', true).text('Workshop Limit Reached');
                                                                }
                                                            } else {
                                                                Swal.fire(
                                                                    'Registration Failed',
                                                                    response.error,
                                                                    'error'
                                                                );
                                                            }
                                                        },
                                                        error: function() {
                                                            Swal.fire(
                                                                'Error',
                                                                'An error occurred. Please try again.',
                                                                'error'
                                                            );
                                                        }
                                                    });
                                                }
                                            });
                                        });
                                    });
                                </script>
                            </div>
                        {% endfor %}
                    </div>
                </div>

              </div>
            </div><!-- End Reports -->

            

          </div>
        </div><!-- End Left side columns -->

        <!-- Right side columns -->
        

      </div>
    </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>CIMAT</span></strong>. All Rights Reserved
    </div>
    <div class="credits">
      Developed by MSwE. Victor Miguel Terrón Macias  
    </div>
  </footer>

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/quill/quill.js' %}"></script>
  <script src="{% static 'assets/vendor/tinymce/tinymce.min.js' %}"></script>
  <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>

  <!-- Template Main JS File -->
  <script src="{% static 'assets/js/main.js' %}"></script>

</body>

</html>
