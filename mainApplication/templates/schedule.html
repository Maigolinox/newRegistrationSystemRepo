{% extends "base.html" %}{% load static %}{% load socialaccount %}{% load countries %}{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  {%block title%}Schedule - CIMPS{%endblock%}
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="{% static 'images/favicon.ico'%}" rel="icon">
  <link href="{% static 'assets/img/apple-touch-icon.png'%}" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/boxicons/css/boxicons.min.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/quill/quill.snow.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/quill/quill.bubble.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/remixicon/remixicon.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/simple-datatables/style.css'%}" rel="stylesheet">

  <link href="{% static 'assets/css/style.css'%}" rel="stylesheet">
  <link href="{% static 'flags/sprite.css'%}" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
{%block content %}
<body>

    {% if not paymentCompleted and not allowRegistration %}
    
    <div id="no-completed-payment" class="alert alert-danger" role="alert">
        <pre><h3>VERY IMPORTANT: </h3><ol><li>Until you have completed payment, the system will not allow you to register for a talk, workshop, or any event.</pre></li>
            </ol>
    </div>
    {% elif paymentCompleted and not allowRegistration %}
    <div id="completed-payment" class="alert alert-warning" role="alert">
        <pre><h3>VERY IMPORTANT: </h3></pre><ol><li>Registration for events is subject to the capacity of the space.</li>
                <li>
                    The registration opening / apertura de registro will be conducted in the Auditorio "Posgrados-Educ. Continua" as equal as the keynotes of the event o 09:00 - 10:00, meaning that during this time other spaces will not be used.
                </li>
                <li>Please review the workshops carefully, as once you have registered for one you will not be able to register for others and it will not be possible to change your registration.</li>
            </ol>
    </div>
    {% elif not paymentCompleted and allowRegistration %}
    <div id="scholarship" class="alert alert-warning" role="alert">
      <pre><h3>VERY IMPORTANT: </h3></pre><ol>
              <li>
                  Registration for events is subject to the capacity of the space.
              </li>
              <li>
                  You have received a <strong>scholarship</strong>, this means that you <strong>will not receive </strong> the welcome kit.
              </li>
              <li>Please review the workshops carefully, as once you have registered for one you will not be able to register for others and it will not be possible to change your registration.</li>
          </ol>
      
  </div>

    {% endif %}

    <div class="pagetitle">
      <h1>Schedule</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#">Home</a></li>
          <li class="breadcrumb-item active">Schedule</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .place-column {
            vertical-align: top;
            width: 14.28%;  /* Divides table into 7 equal parts */
        }
        .event {
            margin-bottom: 1px;
            top: 0; /* Inicia en la parte superior */
                                        left: 0; /* Inicia a la izquierda */
                                        right: 0; /* Se extiende a la derecha */
                                        bottom: 0; /* Se extiende hasta la parte inferior */
                                        padding: 1px; /* Espaciado interno */
                                        margin: 0; /* Elimina margen para llenar completamente la celda */
                                        border-radius: 0px;
                                        font-size: 0.8em;
                                        box-sizing: border-box; /* Incluye padding en el tamaño total */
                                        /* max-height: 200px; Establece una altura máxima */
                                        /* overflow: auto;  */
                                        height: 100%;
        }
    </style>
    <script>
        var userRegistrations = {{ user_registrations|safe }};
        var userHasWorkshop = {{ user_has_workshop|yesno:"true,false" }};
    </script>

    <section class="section dashboard">
      <div class="row">

        <!-- Left side columns -->
        <div class="col-lg-12">
          <div class="row">

            

            <!-- Reports -->
            <div class="col-12">
              <div class="card">

                <div class="filter">
                  <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                  </ul>
                </div>
                <style>
                th, td {
                    text-align: center;
                    vertical-align: middle;
                }
                .nav-tabs .nav-link.active {
    background-color: #007bff; /* Cambia este color por el que prefieras */
    color: #fff; /* Esto cambia el color del texto */
}
                </style>
                
                <div class="card-body">
                    <h5 class="card-title">Schedule of the congress <span> - CIMPS {% now "Y" %}</span></h5>
                    
                    <ul class="nav nav-tabs nav-justified" id="congressTabs" role="tablist">
                      {% for date in congress_dates %}
                          <li class="nav-item" role="presentation">
                              <a class="nav-link {% if forloop.first %}active{% endif %}" id="tab-{{ date.date|date:'Y-m-d' }}" data-bs-toggle="tab" href="#content-{{ date.date|date:'Y-m-d' }}" role="tab" aria-controls="content-{{ date.date|date:'Y-m-d' }}" aria-selected="{% if forloop.first %}true{% else %}false{% endif %}">
                                  {{ date.date|date:"d M Y" }} 
                              </a>
                          </li>
                      {% endfor %}
                  </ul>
                    
                    <div class="tab-content" id="congressTabsContent">
                        {% for date, time_slots_events in events_by_date.items %}
                            <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" id="content-{{ date|date:'Y-m-d' }}" role="tabpanel" aria-labelledby="tab-{{ date|date:'Y-m-d' }}">
                              <style>
                                th, td {
                                    text-align: center;
                                    vertical-align: middle;
                                }
                                .nav-tabs .nav-link.active {
                                  background-color: #007bff; /* Cambia este color por el que prefieras */
                                  color: #fff; /* Esto cambia el color del texto */
                }
                                </style>
                                <style>
                                    table{
                                        border: none;
                                        font-size: 1.2rem;
                                    }
                                    .table-schedule {
                                        border-collapse: none;
                                        border-spacing: 0px;
                                    }
                                    .table-schedule td {
                                        padding: 0;
                                        vertical-align: top; /* Cambiado a 'top' para que empiece desde la parte superior */
                                        position: relative; /* Permite que los hijos puedan usar 'absolute' */
                                        height: auto; /* Para que la celda ajuste su altura automáticamente */
                                    }
                                    .event {
                                        /* position: absolute; Cambiado a absolute para llenar completamente la celda */
                                        top: 0; /* Inicia en la parte superior */
                                        left: 0; /* Inicia a la izquierda */
                                        right: 0; /* Se extiende a la derecha */
                                        bottom: 0; /* Se extiende hasta la parte inferior */
                                        padding: 1px; /* Espaciado interno */
                                        margin: 0; /* Elimina margen para llenar completamente la celda */
                                        border-radius: 0px;
                                        font-size: 0.8em;
                                        box-sizing: border-box; /* Incluye padding en el tamaño total */
                                        /* max-height: 200px; Establece una altura máxima */
                                        /* overflow: auto;  */
                                        height: 100%;
                                    }
                                    .place-column {
                                        /* width: 200px; */
                                    }
                                    .see-details {
                                        color: inherit;
                                        text-decoration: underline;
                                    }
                                    .event {
                                      border-radius: 10px;
                                    }
                                    th, td {
                                      text-align: center;
                                      vertical-align: middle;
                                    }
                                    .bg-danger{
                                      color: white;
                                    }
                                </style>
                                
                                

                                <table
                                class="table table-borderless text-center table-schedule align-middle "
                                style="height: fit-content"
                              >
                                <thead class="text-center">
                                  <tr>
                                    <th></th>
                                    {% for place in places %}
                                    <th
                                      class="{% if forloop.counter == 1 %}bg-danger {% elif forloop.counter == 2 %}bg-warning{% else %}bg-secondary{% endif %}"
                                      style="{% if forloop.counter == 1 %} color: white;{% endif %}"
                                    >
                                      {{ place.name }} (Capacity: {{ place.capacity }})
                                    </th>
                                    {% endfor %}
                                  </tr>
                                </thead>
                                
                                <tbody >
                                  {% for time_slot, places_events in time_slots_events.items %}
                                  <tr class="text-center">
                                    <td style="vertical-align: middle;">{{ time_slot }}</td>
                                    {% for place in places %}
                                    <td class="place-column " style="vertical-align: middle;" >
                                      {% with place_events=places_events|get_item:place.name %} {% for event in place_events %}
                                      <div 
                                        id="event-{{ event.id }}-{{ forloop.parentloop.counter }}-{{ forloop.counter }}"
                                        class="d-flex flex-column justify-content-center align-items-center text-center  event  {% if event.event_type == 'ieee' %}bg-warning{% elif event.event_type == 'springer' or event.event_type == 'keynote' %}bg-danger{% elif event.event_type == 'lunch' %}bg-info{% elif event.event_type == 'workshop' %}bg-secondary{% else %}bg-success{% endif %} "
                                      >
                                        <strong><br />{{ event.title | safe }}</strong>
                                        <span
                                          >{{ event.start_time|time:"H:i" }} - {{event.end_time|time:"H:i"}}</span
                                        >
                                        {% if event.ponent_name %}
                                        <strong><span>Speaker: {{ event.ponent_name }}</span></strong
                                        ><br />
                                        {% endif %}
                                        {% if event.affiliation %}
                                        <strong><span>Affiliation: {{ event.affiliation }}</span></strong
                                        ><br />
                                        {% endif %}
                                         {% if event.moderator %}
                                        <strong><span>Moderator: {{ event.moderator }}</span></strong
                                        ><br />
                                        {% endif %} {% if not event.event_type == 'other' and not event.event_type == 'lunch' %} Available spaces: {{event.available_capacity }} <br />
                                        {% endif %} {% if event.event_type != 'lunch' %}
                                        <a
                                          href="#"
                                          class="see-details"
                                          data-toggle="modal"
                                          data-target="#eventModal"
                                          data-title="{{ event.title }}"
                                          data-description="{{ event.description }}"
                                          {% if event.banner %}data-banner="{{ event.banner.url }}"{% endif %}
                                          data-link="{{ event.link }}"
                                          data-requisites="{{ event.requisites }}"
                                          data-ponent_name="{{ event.ponent_name }}"
                                          data-affiliation="{{ event.affiliation }}"
                                          >See Details</a
                                        ><br />
                                        {% endif %} 
                                        {% if paymentCompleted or allowRegistration %}
                                        <br />
                                        {% if  event.event_type != 'lunch' and event.event_type != 'other'  %}
                                        <button class="btn btn-light rounded-pill register-event"
                                        data-event-title="{{ event.title }}"
                                        data-event-date="{{ event.date|date:'Y-m-d' }}"
                                        data-event-start-time="{{ event.start_time|time:'H:i' }}"
                                        data-event-end-time="{{ event.end_time|time:'H:i' }}"
                                        {% if event.title in user_registrations %}
                                            disabled
                                        {% endif %}>
                                    {% if event.title in user_registrations %}
                                        Registered
                                    {% else %}
                                        Register
                                    {% endif %}
                                </button>
{% if conflict %}
<p class="text-danger">No puedes registrarte en este evento debido a un conflicto de horarios o eventos paralelos.</p>
{% endif %}
                                        {% endif %}
                                        {% endif %}
                                        {% if is_staff_superuser %}
                                        <br><br>
                                        <a href="{% url 'editEvent' event.id %}" class="btn btn-dark">Edit Event</a>
                                        <br><br>
                                        {% endif %}
                                      </div>
                                      {% endfor %} {% endwith %}
                                    </td>
                                    {% endfor %}
                                  </tr>
                                  {% endfor %}
                                </tbody>
                                
                              </table>
                              
                              


                              <style>
                                #event-7-85, #event-3-79, #event-4-88,#event-5-87,#event-6-86 ,#event-3-80,#event-4-81,#event-5-82,#event-6-83,#event-7-84,#event-3-123,#event-4-124,#event-5-125,#event-6-126,#event-7-127 {
                                    display: flex; /* Usa flexbox para centrar */
                                    flex-direction: column; /* Alinea el contenido en columna */
                                    justify-content: center; /* Centra verticalmente */
                                    align-items: center; /* Centra horizontalmente */
                                    height: 100%; /* O ajusta según sea necesario */
                                }
                            </style>

                            <script>
                              
                            </script>
                            <script>
                              var targetDiv = document.getElementById("event-9-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-66-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-177-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-25-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-89-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-106-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-38-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-135-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-152-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-79-3-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                                  var targetDiv = document.getElementById("event-88-4-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-87-5-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-86-6-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-85-7-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-80-3-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-81-4-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-82-5-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-83-6-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-84-7-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-123-3-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-124-4-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-80-3-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-125-5-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-126-6-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-127-7-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-131-3-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-132-4-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-133-5-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-134-6-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-129-7-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-167-3-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-164-4-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-163-5-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-160-6-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-128-7-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "3");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-166-3-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-165-4-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-162-5-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-161-6-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-130-7-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("rowspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-39-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-18-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }var targetDiv = document.getElementById("event-11-1-1");
                                  if (targetDiv) {
                                    const parentTd = targetDiv.closest("td");
                                    if (parentTd) {
                                      parentTd.setAttribute("colspan", "7");
                                      const divs = parentTd.querySelectorAll("div");
                                      divs.forEach(div => {
                                        if (div.id !== targetDiv.id) {
                                          div.remove();
                                        }
                                      });
                                    }
                                  }
                            </script>
                            <script>
                              $(document).ready(function() {
    // Crear un objeto para llevar un registro de los IDs
    var seenIds = {};

    // Buscar todos los divs que tienen un atributo 'id'
    $('div[id]').each(function() {
        var currentId = $(this).attr('id');

        // Si el ID ya se ha visto antes, elimina el div
        if (seenIds[currentId]) {
            $(this).remove();
        } else {
            // Si no se ha visto, lo marcamos como visto
            seenIds[currentId] = true;
        }
    });
});
                            </script>


<script>
  $(document).ready(function() {
      // Función para verificar si el usuario está registrado en un taller que dura todo el evento
      function isRegisteredForFullEvent() {
          return userRegistrations.some(event => event.isAllEvent);
      }
  
      // Deshabilitar botones para eventos en los que el usuario ya está registrado
      userRegistrations.forEach(function(event) {
          $('button.register-event[data-event-title="' + event.title + '"]').prop('disabled', true).text('Registered');
      });
  
      // Si el usuario está registrado en un taller de día completo, deshabilitar otros talleres
      if (isRegisteredForFullEvent()) {
          $('.register-event').each(function() {
              if (!$(this).data('event-all')) {
                  $(this).prop('disabled', true).text('Conflicting Workshop');
              }
          });
      }
  
      $('.register-event').click(function() {
          var eventTitle = $(this).data('event-title');
          var eventType = $(this).data('event-type');
          var isAllEvent = $(this).data('event-all');
          var button = $(this);
  
          if (userRegistrations.some(event => event.title === eventTitle)) {
              Swal.fire('Already Registered', 'You are already registered for this event.', 'info');
              return;
          }
  
          // Verificar si el evento es un taller que dura todo el congreso
          if (isAllEvent && isRegisteredForFullEvent()) {
              Swal.fire('Conflict', 'You cannot register for other workshops due to a full-week event.', 'info');
              return;
          }
  
          Swal.fire({
              title: 'Confirm Registration',
              text: 'Do you want to register for the event: ' + eventTitle + '?',
              icon: 'question',
              showCancelButton: true,
              confirmButtonColor: '#3085d6',
              cancelButtonColor: '#d33',
              confirmButtonText: 'Yes, register me!'
          }).then((result) => {
              if (result.isConfirmed) {
                  $.ajax({
                      url: '{% url "registerintoEvent" %}',
                      type: 'POST',
                      data: {
                          'event_title': eventTitle,
                          'csrfmiddlewaretoken': '{{ csrf_token }}'
                      },
                      success: function(response) {
                          if (response.success) {
                              Swal.fire(
                                  'Registered!',
                                  'You have been successfully registered for the event.',
                                  'success'
                              );
                              $('button.register-event[data-event-title="' + eventTitle + '"]').prop('disabled', true).text('Registered');
                              userRegistrations.push({ title: eventTitle, isAllEvent: isAllEvent });
                          } else {
                              Swal.fire(
                                  'Registration Failed',
                                  response.error,
                                  'error'
                              );
                          }
                      },
                      error: function() {
                          Swal.fire(
                              'Error',
                              'An error occurred. Please try again.',
                              'error'
                          );
                      }
                  });
              }
          });
      });
  });
  </script>
  
                            </div>
                        {% endfor %}
                    </div>
                </div>

              </div>
            </div><!-- End Reports -->

            

          </div>
        </div><!-- End Left side columns -->

        <!-- Right side columns -->
        

      </div>
    </section>
    <div class="modal fade" id="eventModal" tabindex="-1" role="dialog" aria-labelledby="eventModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 80%;">
          <div class="modal-content">
              <div class="modal-header">
                  <h5 class="modal-title" id="eventModalLabel">Event Details</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                  </button>
              </div>
              <div class="modal-body">
                  <!-- Imagen del banner (oculta por defecto) -->
                  <img id="modal-banner" src="" alt="Event Banner" class="img-fluid mb-3" style="display: none; max-width: 100%; height: auto;">
                  
                  <!-- Título y descripción del evento -->
                  <h6 id="modal-event-title"></h6>
                  <p id="modal-event-description"></p>
                  
                  <!-- Enlace de acceso (oculto por defecto) -->
                  <p id="modal-event-link" style="display: none;"></p>
                  <br>
                  <p id="modal-event-ponent_name" style="display: none;"></p>
                  <p id="modal-event-affiliation" style="display: none;"></p>
                  <p id="modal-event-requisites" style="display: none;"></p>
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
          </div>
      </div>
  </div>
  
  
  
  
    
  <script>
    $(document).ready(function() {
        // Manejador del clic en el enlace "See Details"
        $('.see-details').click(function() {
            var title = $(this).data('title');
            var description = $(this).data('description');
            var banner = $(this).data('banner');
            var link = $(this).data('link');
            var affiliation = $(this).data('affiliation');
            var requisites = $(this).data('requisites');
            var ponent_name = $(this).data('ponent_name');

            // Actualiza los campos del modal con los datos
            if (title) {
                $('#modal-event-title').html('<strong>Title:</strong><br>' + title + '.').show();
            } else {
                $('#modal-event-title').hide();
            }

            if (ponent_name) {
                $('#modal-event-ponent_name').html('<strong>Ponent Name:</strong><br>' + ponent_name + '.').show();
            } else {
                $('#modal-event-ponent_name').hide();
            }

            if (affiliation) {
                $('#modal-event-affiliation').html('<strong>Affiliation:</strong><br>' + affiliation + '.').show();
            } else {
                $('#modal-event-affiliation').hide();
            }

            if (description) {
                $('#modal-event-description').html('<strong>Description:</strong><br>' + description + '.').show();
            } else {
                $('#modal-event-description').hide();
            }

            if (requisites) {
                $('#modal-event-requisites').html('<strong>Requisites:</strong><br>' + requisites + '.').show();
            } else {
                $('#modal-event-requisites').hide();
            }

            // Mostrar el banner si existe
            if (banner) {
                $('#modal-banner').attr('src', banner).show();
            } else {
                $('#modal-banner').hide();
            }

            // Mostrar el enlace si existe
            if (link) {
                $('#modal-event-link').html('<a href="' + link + '" target="_blank">Access Event Link</a>').show();
            } else {
                $('#modal-event-link').hide();
            }
        });
    });
</script>

  </main><!-- End #main -->

  

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/quill/quill.js' %}"></script>
  <script src="{% static 'assets/vendor/tinymce/tinymce.min.js' %}"></script>
  <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>

  <!-- Template Main JS File -->
  <script src="{% static 'assets/js/main.js' %}"></script>

</body>
{%endblock%}
</html>
